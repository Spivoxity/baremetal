#!/bin/bash
# genproj

dir=$(dirname $(dirname $(realpath $0)))

project() {
    proj=$1; type=$2; main=$3; targ=$4; name=${proj%%-*}
    sed -e "s:@PROJNAME@:$name:" \
        -e "s:@TARGET@:$targ:" \
        -e "s:@PROJDIR@:$dir/$proj:" \
        -e "s:@MICROBIAN@:$dir/microbian:" \
        -e "s:@MAINFILE@:$dir/$proj/$main:" \
        -e "/^FILE_NAME/s:/:%2F:g" \
        $dir/setup/$type.geany >$dir/$proj/$name.geany
}

project x1100-instrs type1 func.s func
project x1200-loops type1 mult.s mult
project x1000-echo type2 echo.c echo
project x2000-heart type2 heart.c heart
project x2100-serial type2 primes.c primes
project x2200-interrupt type2 primes2.c primes2
project x2300-intrmech type2 bitbang.c bitbang
project x2400-neopixels type2 rainbow.c rainbow
project x3000-processes type3 valentine.c valentine
project x3040-messages type3 pcount.c pcount
project x3300-level type3 level.c level
project x3340-scrollbit type3 scrollbit.c scrollbit
project x3710-latency type3 latency.c latency
project x1500-hack hack total.c total
